{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"mt-3 w-6/12 mx-auto\"\n};\nconst _hoisted_2 = {\n  class: \"rounded bg-white shadow-md\",\n  style: {\n    \"width\": \"1063px\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"overflow-x-auto\"\n};\nconst _hoisted_4 = {\n  class: \"table-fixed w-auto min-w-full\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"thead\", {\n  class: \"bg-gray-200 border-gray-300 border-t border-b\"\n}, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", {\n  class: \"font-medium text-sm p-2 text-right\",\n  style: {\n    \"width\": \"100px\"\n  }\n}, \"ID\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  class: \"font-medium text-sm p-2 text-left\",\n  style: {\n    \"width\": \"500px\"\n  }\n}, \"Brand\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  class: \"font-medium text-sm p-2 text-left\",\n  style: {\n    \"width\": \"200px\"\n  }\n}, \"Price\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  class: \"font-medium text-sm p-2 text-left\",\n  style: {\n    \"width\": \"200px\"\n  }\n}, \"Product\")])], -1);\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"td\", {\n  colspan: \"4\",\n  class: \"text-center\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"w-12 h-12 mt-5 mx-auto rounded-full animate-spin border-2 border-solid border-blue-500 border-t-transparent\"\n})], -1);\nconst _hoisted_8 = [_hoisted_7];\nconst _hoisted_9 = {\n  class: \"text-sm font-medium text-right\"\n};\nconst _hoisted_10 = {\n  href: \"#\",\n  class: \"inline-block p-2 w-full truncate\"\n};\nconst _hoisted_11 = {\n  class: \"text-sm\",\n  style: {\n    \"max-width\": \"200px\"\n  }\n};\nconst _hoisted_12 = {\n  class: \"text-sm\"\n};\nconst _hoisted_13 = {\n  class: \"text-sm\"\n};\nconst _hoisted_14 = {\n  class: \"py-4 px-5 flex justify-between items-center\"\n};\nconst _hoisted_15 = [\"disabled\"];\nconst _hoisted_16 = [\"disabled\"];\nimport { onMounted, ref } from \"vue\";\nimport { md5 } from \"js-md5\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nconst apiUrl = 'http://api.valantis.store:40000/';\nexport default {\n  __name: 'App',\n  setup(__props) {\n    axios.defaults.headers['X-Auth'] = md5(`Valantis_${moment().format('yyyyMMDD')}`);\n    const items = ref([]);\n    const page = ref(1);\n    const isLoading = ref(false);\n    onMounted(() => {\n      getItemsIds();\n    });\n    const getItems = (ids = []) => {\n      axios.post(apiUrl, {\n        \"action\": \"get_items\",\n        \"params\": {\n          \"ids\": ids\n        }\n      }).then(({\n        data\n      }) => {\n        const keys = ['id'];\n        items.value = data.result.filter((value, index, self) => self.findIndex(v => keys.every(k => v[k] === value[k])) === index) ?? [];\n        isLoading.value = true;\n      }).catch(e => {\n        console.log(e);\n        getItemsIds(true);\n      });\n    };\n    const getItemsIds = (repeat = false) => {\n      isLoading.value = true;\n      return axios.post(apiUrl, {\n        \"action\": \"get_ids\",\n        \"params\": {\n          \"offset\": page.value * 10,\n          \"limit\": 10\n        }\n      }).then(({\n        data\n      }) => {\n        getItems(data.result ?? []);\n      }).catch(e => {\n        if (!repeat) {\n          getItemsIds(true);\n          console.log(e);\n        }\n      });\n    };\n    const prevPage = () => {\n      page.value--;\n      getItemsIds(false);\n    };\n    const nextPage = () => {\n      page.value++;\n      getItemsIds(false);\n    };\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"table\", _hoisted_4, [_hoisted_5, _createElementVNode(\"tbody\", null, [isLoading.value ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_6, _hoisted_8)) : (_openBlock(true), _createElementBlock(_Fragment, {\n        key: 1\n      }, _renderList(items.value, (item, index) => {\n        return _openBlock(), _createElementBlock(\"tr\", {\n          class: \"border-gray-300 border-b hover:bg-gray-100\",\n          key: index\n        }, [_createElementVNode(\"td\", _hoisted_9, [_createElementVNode(\"a\", _hoisted_10, _toDisplayString(item.id), 1)]), _createElementVNode(\"td\", _hoisted_11, _toDisplayString(item.brand), 1), _createElementVNode(\"td\", _hoisted_12, _toDisplayString(item.price), 1), _createElementVNode(\"td\", _hoisted_13, _toDisplayString(item.product), 1)]);\n      }), 128))])])]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n        disabled: isLoading.value || page.value < 2,\n        onClick: _cache[0] || (_cache[0] = $event => prevPage()),\n        class: \"px-8 py-3 disabled:bg-gray-300 text-white bg-sky-500 hover:bg-sky-700 rounded focus:outline-none\"\n      }, \" Previous \", 8, _hoisted_15), _createElementVNode(\"button\", {\n        disabled: isLoading.value,\n        onClick: _cache[1] || (_cache[1] = $event => nextPage()),\n        class: \"px-8 py-3 disabled:bg-gray-300 ml-3 text-white bg-sky-500 hover:bg-sky-700 rounded focus:outline-none\"\n      }, \" Next \", 8, _hoisted_16)])])])])]);\n    };\n  }\n};","map":{"version":3,"names":["onMounted","ref","md5","axios","moment","apiUrl","defaults","headers","format","items","page","isLoading","getItemsIds","getItems","ids","post","then","data","keys","value","result","filter","index","self","findIndex","v","every","k","catch","e","console","log","repeat","prevPage","nextPage"],"sources":["/var/www/html/valantis/src/App.vue"],"sourcesContent":["<script setup>\nimport {onMounted, ref} from \"vue\";\nimport {md5} from \"js-md5\";\nimport axios from \"axios\";\nimport moment from \"moment\";\n\naxios.defaults.headers['X-Auth'] = md5(`Valantis_${moment().format('yyyyMMDD')}`)\nconst apiUrl = 'http://api.valantis.store:40000/'\nconst items = ref([])\nconst page = ref(1)\nconst isLoading = ref(false)\nonMounted(() => {\n  getItemsIds()\n})\n\nconst getItems = (ids = []) => {\n  axios.post(apiUrl, {\n    \"action\": \"get_items\",\n    \"params\": {\n      \"ids\": ids\n    }\n  }).then(({data}) => {\n    const keys = ['id'];\n    items.value = data.result.filter((value, index, self) =>\n        self.findIndex(v => keys.every(k => v[k] === value[k])) === index\n    ) ?? []\n    isLoading.value = true\n  }).catch((e) => {\n    console.log(e);\n    getItemsIds(true)\n  })\n}\nconst getItemsIds = (repeat = false) => {\n  isLoading.value = true\n  return axios.post(apiUrl, {\n    \"action\": \"get_ids\",\n    \"params\": {\n      \"offset\": page.value * 10,\n      \"limit\": 10\n    }\n  }).then(({data}) => {\n    getItems(data.result ?? [])\n  }).catch((e) => {\n    if (!repeat) {\n      getItemsIds(true)\n      console.log(e);\n    }\n  })\n}\nconst prevPage = () => {\n  page.value--\n  getItemsIds(false)\n}\nconst nextPage = () => {\n  page.value++\n  getItemsIds(false)\n}\n</script>\n\n<template>\n  <div>\n    <div class=\"mt-3 w-6/12 mx-auto\">\n      <div class=\"rounded bg-white shadow-md\" style=\"width: 1063px;\">\n        <div class=\"overflow-x-auto\">\n\n          <table class=\"table-fixed w-auto min-w-full\">\n            <thead class=\"bg-gray-200 border-gray-300 border-t border-b\">\n            <tr>\n              <th class=\"font-medium text-sm p-2 text-right\" style=\"width: 100px;\">ID</th>\n              <th class=\"font-medium text-sm p-2 text-left\" style=\"width: 500px;\">Brand</th>\n              <th class=\"font-medium text-sm p-2 text-left\" style=\"width: 200px;\">Price</th>\n              <th class=\"font-medium text-sm p-2 text-left\" style=\"width: 200px;\">Product</th>\n            </tr>\n\n            </thead>\n            <tbody>\n            <tr v-if=\"isLoading\">\n              <td colspan=\"4\" class=\"text-center\"> <!-- Use colspan to span across all columns -->\n                <div class=\"w-12 h-12 mt-5 mx-auto rounded-full animate-spin border-2 border-solid border-blue-500 border-t-transparent\"></div>\n              </td>\n            </tr>\n            <tr v-else class=\"border-gray-300 border-b hover:bg-gray-100\" v-for=\"(item, index) in items\" :key=\"index\">\n              <td class=\"text-sm font-medium text-right\"><a href=\"#\" class=\"inline-block p-2 w-full truncate\">{{ item.id }}</a></td>\n              <td class=\"text-sm\" style=\"max-width: 200px;\">{{ item.brand }}</td>\n              <td class=\"text-sm\">{{ item.price }}</td>\n              <td class=\"text-sm\">{{ item.product }}</td>\n            </tr>\n            </tbody>\n          </table>\n\n        </div>\n        <div class=\"py-4 px-5 flex justify-between items-center\">\n          <div>\n            <button :disabled=\"isLoading || page < 2\" @click=\"prevPage()\"\n                    class=\"px-8 py-3 disabled:bg-gray-300 text-white bg-sky-500 hover:bg-sky-700 rounded focus:outline-none\">\n              Previous\n            </button>\n            <button :disabled=\"isLoading\" @click=\"nextPage()\"\n                    class=\"px-8 py-3 disabled:bg-gray-300 ml-3 text-white bg-sky-500 hover:bg-sky-700 rounded focus:outline-none\">\n              Next\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style>\n\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,SAAQA,SAAS,EAAEC,GAAG,QAAO,KAAK;AAClC,SAAQC,GAAG,QAAO,QAAQ;AAC1B,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,QAAQ;AAG3B,MAAMC,MAAM,GAAG,kCAAkC;;;;IADjDF,KAAK,CAACG,QAAQ,CAACC,OAAO,CAAC,QAAQ,CAAC,GAAGL,GAAG,CAAE,YAAWE,MAAM,CAAC,CAAC,CAACI,MAAM,CAAC,UAAU,CAAE,EAAC,CAAC;IAEjF,MAAMC,KAAK,GAAGR,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMS,IAAI,GAAGT,GAAG,CAAC,CAAC,CAAC;IACnB,MAAMU,SAAS,GAAGV,GAAG,CAAC,KAAK,CAAC;IAC5BD,SAAS,CAAC,MAAM;MACdY,WAAW,CAAC,CAAC;IACf,CAAC,CAAC;IAEF,MAAMC,QAAQ,GAAGA,CAACC,GAAG,GAAG,EAAE,KAAK;MAC7BX,KAAK,CAACY,IAAI,CAACV,MAAM,EAAE;QACjB,QAAQ,EAAE,WAAW;QACrB,QAAQ,EAAE;UACR,KAAK,EAAES;QACT;MACF,CAAC,CAAC,CAACE,IAAI,CAAC,CAAC;QAACC;MAAI,CAAC,KAAK;QAClB,MAAMC,IAAI,GAAG,CAAC,IAAI,CAAC;QACnBT,KAAK,CAACU,KAAK,GAAGF,IAAI,CAACG,MAAM,CAACC,MAAM,CAAC,CAACF,KAAK,EAAEG,KAAK,EAAEC,IAAI,KAChDA,IAAI,CAACC,SAAS,CAACC,CAAC,IAAIP,IAAI,CAACQ,KAAK,CAACC,CAAC,IAAIF,CAAC,CAACE,CAAC,CAAC,KAAKR,KAAK,CAACQ,CAAC,CAAC,CAAC,CAAC,KAAKL,KAChE,CAAC,IAAI,EAAE;QACPX,SAAS,CAACQ,KAAK,GAAG,IAAI;MACxB,CAAC,CAAC,CAACS,KAAK,CAAEC,CAAC,IAAK;QACdC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;QACdjB,WAAW,CAAC,IAAI,CAAC;MACnB,CAAC,CAAC;IACJ,CAAC;IACD,MAAMA,WAAW,GAAGA,CAACoB,MAAM,GAAG,KAAK,KAAK;MACtCrB,SAAS,CAACQ,KAAK,GAAG,IAAI;MACtB,OAAOhB,KAAK,CAACY,IAAI,CAACV,MAAM,EAAE;QACxB,QAAQ,EAAE,SAAS;QACnB,QAAQ,EAAE;UACR,QAAQ,EAAEK,IAAI,CAACS,KAAK,GAAG,EAAE;UACzB,OAAO,EAAE;QACX;MACF,CAAC,CAAC,CAACH,IAAI,CAAC,CAAC;QAACC;MAAI,CAAC,KAAK;QAClBJ,QAAQ,CAACI,IAAI,CAACG,MAAM,IAAI,EAAE,CAAC;MAC7B,CAAC,CAAC,CAACQ,KAAK,CAAEC,CAAC,IAAK;QACd,IAAI,CAACG,MAAM,EAAE;UACXpB,WAAW,CAAC,IAAI,CAAC;UACjBkB,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;QAChB;MACF,CAAC,CAAC;IACJ,CAAC;IACD,MAAMI,QAAQ,GAAGA,CAAA,KAAM;MACrBvB,IAAI,CAACS,KAAK,EAAE;MACZP,WAAW,CAAC,KAAK,CAAC;IACpB,CAAC;IACD,MAAMsB,QAAQ,GAAGA,CAAA,KAAM;MACrBxB,IAAI,CAACS,KAAK,EAAE;MACZP,WAAW,CAAC,KAAK,CAAC;IACpB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}